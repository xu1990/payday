# 薪日 PayDay - Sprint 与任务列表

基于 [迭代规划.md](迭代规划.md) 将各 Phase 拆为 2 周一轮的 Sprint，并列出每轮任务与验收点。与 [技术方案_v1.0](技术方案_v1.0.md) 的模块实现对应。

---

## Phase 1：MVP 版（6–8 周，4 个 Sprint）

### Sprint 1.1（Week 1–2）：基础架构 + 登录与发薪日

**目标**：环境就绪、用户可登录、可配置发薪日。

| 任务 | 说明 | 验收 |
|------|------|------|
| 立项与环境 | MySQL/Redis/COS/微信 AppID；主服务骨架、Alembic 迁移 | 服务可启动、DB 可迁移 |
| 微信登录 | code2session、JWT、/api/v1/auth/login | 小程序可完成登录并拿到 Token |
| 用户与匿名昵称 | User 表、匿名昵称生成、user:info 缓存 | 登录后返回用户信息 |
| 发薪日配置 API | PaydayConfig CRUD、payday:status 缓存 | 可增删改查发薪日 |
| 发薪日设置页 | 公历/农历、多工作、列表 | 小程序可配置并保存 |

**交付**：登录 + 发薪日设置闭环。

---

### Sprint 1.2（Week 3–4）：工资记录 + 首页状态

**目标**：可记工资、首页展示发薪状态与倒计时。

| 任务 | 说明 | 验收 |
|------|------|------|
| 工资记录 API | SalaryRecord、金额加密存储、列表/详情 | 可创建/查询记录，金额加密 |
| 记工资页 | 实发金额、类型、心情、图片上传、COS | 可提交并展示记录 |
| 首页发薪状态 | 今日是否发薪、剩余天数、心情 | 与配置一致 |
| 本月进度条 | 时间进度 | 与 迭代 1.1 一致 |

**交付**：记工资 + 首页状态/倒计时。

---

### Sprint 1.3（Week 5–6）：统计 + 个人中心 + 海报

**目标**：统计、个人中心、分享海报。

| 任务 | 说明 | 验收 |
|------|------|------|
| 统计 API | 本月/年度汇总、趋势（技术方案 2.2.2 索引） | 接口 < 500ms |
| 统计页 | 本月收入、趋势图（ECharts） | 与 PRD 一致 |
| 个人中心 | 记录列表、打工天数、设置入口 | 与 迭代 1.1 个人中心一致 |
| 发薪海报 | 生成、保存、分享 | 可生成并分享 |

**交付**：统计 + 个人中心 + 海报。

---

### Sprint 1.4（Week 7–8）：管理后台 + 验收与上线

**目标**：后台用户/记录管理、MVP 验收与上线准备。

| 任务 | 说明 | 验收 |
|------|------|------|
| 管理后台登录 | 管理员账号、JWT | 可登录后台 |
| 用户管理 | 用户列表、详情、搜索 | 与 迭代 1.1 一致 |
| 工资记录管理 | 记录列表、删除、图片审核入口 | 与 迭代 1.1 一致 |
| 数据统计 | 用户数、记录数、简单图表 | 与 迭代 1.1 一致 |
| MVP 验收 | 按 迭代规划 1.4 执行 | 功能/性能/安全/上线准备 |
| 上线准备 | 小程序提审、部署、监控 | 可上线 |

**交付**：管理后台可用 + MVP 验收通过。

---

## Phase 2：社区版（6–8 周，4 个 Sprint）

### Sprint 2.1（Week 1–2）：帖子与列表

| 任务 | 说明 | 验收 |
|------|------|------|
| Post 表与 API | 发帖、列表（热门/最新）、详情 | 与 迭代 2.2 数据模型一致 |
| 帖子列表页 | 广场、Tab 切换 | 可刷帖子 |
| 发帖页 | 类型、文字、图片、标签/工资区间/行业城市 | 可发布，risk_status=pending |

### Sprint 2.2（Week 3–4）：评论、点赞、通知

| 任务 | 说明 | 验收 |
|------|------|------|
| Comment/Like API | 评论、二级回复、点赞 | 与 迭代 2.2 一致 |
| 帖子详情 + 评论 | 楼层、点赞 | 可评论、点赞 |
| Notification | 评论/回复/点赞通知、未读 | 可收到通知 |

### Sprint 2.3（Week 5–6）：风控服务与队列

| 任务 | 说明 | 验收 |
|------|------|------|
| 风控服务 | 文本+图片+OCR、评分、与技术方案 3.2 一致 | 独立服务可调 |
| 队列任务 | risk_check_task、content_moderation_task | 发布后异步审核、更新 risk_status |
| 拒绝下架与通知 | score≥80 下架+通知 | 与 迭代 2.3 流程一致 |

### Sprint 2.4（Week 7–8）：后台内容/风控 + 验收

| 任务 | 说明 | 验收 |
|------|------|------|
| 帖子/评论管理 | 列表、隐藏/删除、置顶 | 与 迭代 2.1 一致 |
| 风控待审与人工 | 待审列表、通过/拒绝 | 与 迭代 2.1 一致 |
| 社区版验收 | 按 迭代规划 2.5 | 功能/性能/安全 |

---

## Phase 3：完整版（8–10 周，5 个 Sprint）

### Sprint 3.1（Week 1–2）：关注

| 任务 | 说明 | 验收 |
|------|------|------|
| Follow API、关注流 | 关注/取关、粉丝/关注列表、关注动态流 | 与 迭代 3.1 一致 |
| 匿名主页增强 | 粉丝/关注/获赞 | 与 迭代 3.1 一致 |

### Sprint 3.2（Week 3–4）：数据洞察

| 任务 | 说明 | 验收 |
|------|------|------|
| 统计接口 | 行业/城市/区间/发薪日分布 | 与 迭代 3.1 一致 |
| 数据洞察页 | 图表与个人报告 | 与 PRD 数据洞察一致 |

### Sprint 3.3（Week 5–6）：工资记录增强 + 打卡

| 任务 | 说明 | 验收 |
|------|------|------|
| 税前/扣税/来源/延迟 | 字段与展示 | 与 迭代 3.1 一致 |
| 打卡 | CheckIn、打卡接口与日历 | 与 迭代 3.1 一致 |

### Sprint 3.4（Week 7–8）：主题与设置

| 任务 | 说明 | 验收 |
|------|------|------|
| 主题与隐私/消息设置 | Theme、设置 API | 与 迭代 3.1 一致 |

### Sprint 3.5（Week 9–10）：会员与商业化 + 验收

| 任务 | 说明 | 验收 |
|------|------|------|
| 会员与订单 | MembershipOrder、权益、支付预留 | 与 迭代 3.3 一致 |
| 管理后台运营与商业配置 | 话题、推荐、会员/主题配置、订单 | 与 迭代 3.1 一致 |
| 完整版验收 | 按 迭代规划 3.5 | 功能/性能/商业验收 |

---

## 与模块技术方案对应关系

- **发薪日**：Sprint 1.1（技术方案 2.2 + 2.3 payday 缓存）
- **工资记录**：Sprint 1.2、1.3（技术方案 2.2.3 加密、2.3 缓存）
- **统计**：Sprint 1.3（技术方案 2.2.2 索引）
- **帖子/评论/点赞**：Sprint 2.1–2.2（技术方案 2.2 分表、2.3 ZSet/点赞缓存）
- **风控**：Sprint 2.3（技术方案 2.4 队列、3.2 风控服务）
- **通知**：Sprint 2.2（技术方案 2.4 队列）
- **管理后台**：Sprint 1.4、2.4、3.5（技术方案 2.1.1 admin API）
- **关注**：Sprint 3.1（技术方案 2.3 关注缓存）
- **数据洞察**：Sprint 3.2（技术方案 2.2 统计库/ES 可选）
- **会员/主题**：Sprint 3.5（技术方案 2.2 表设计）

详细接口与表结构见 [技术方案_按模块细化.md](技术方案_按模块细化.md)。
