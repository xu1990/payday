# 薪日 PayDay - 迭代规划

## 文档信息
- **文档版本**: v1.0
- **创建日期**: 2025-02-11
- **产品名称**: 薪日 PayDay
- **规划方式**: 分阶段迭代，每阶段独立可上线

---

# 迭代总览

```
┌─────────────────────────────────────────────────────────────────┐
│                        薪日 PayDay 产品路线图                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Phase 1: MVP版              Phase 2: 社区版        Phase 3: 完整版│
│  ═════════════               ═════════════         ═════════════  │
│  ┌──────────────┐           ┌──────────────┐      ┌──────────────┐│
│  │  工具型产品  │    ──►    │  社交型产品  │  ──► │  平台型产品  ││
│  │  - 核心功能  │           │  - 社区互动  │      │  - 商业化   ││
│  │  - 基础统计  │           │  - 内容生态  │      │  - 数据洞察││
│  └──────────────┘           └──────────────┘      └──────────────┘│
│        │                         │                      │        │
│        ▼                         ▼                      ▼        │
│   核心价值验证              用户留存增长            平台生态    │
│   (1-1.5个月)              (1.5-2个月)            (2-2.5个月)  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

# Phase 1: MVP版 - 工具型产品

**目标**: 快速上线，验证核心价值（发薪日记录）
**时间**: 6-8周
**可上线标准**: 用户能够完成完整的工资记录流程

## 1.1 核心功能

### 小程序端

#### 首页模块
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 发薪状态展示 | "今天发薪啦" / "距离发薪还有X天" | P0 |
| 发薪倒计时 | 大字号显示剩余天数 | P0 |
| 心情选择 | 开心/续命/崩溃/期待 | P0 |
| 本月进度条 | 时间进度可视化 | P1 |
| 快捷操作入口 | 记工资、设置发薪日 | P0 |

#### 发薪日设置
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 工作名称 | 主业/副业标识 | P0 |
| 发薪日设置 | 每月几号发薪 | P0 |
| 日历类型 | 公历/农历选择 | P1 |
| 预估工资 | 用于统计（可选） | P2 |
| 多工作支持 | 支持配置多份工作 | P1 |

#### 工资记录
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 实发金额 | 税后到账金额 | P0 |
| 发薪日期 | 默认今天 | P0 |
| 工资类型 | 正常工资/奖金/补贴 | P1 |
| 备注 | 文字备注 | P2 |
| 心情记录 | 本次发薪心情 | P0 |
| 工资条图片 | 上传截图（最多3张） | P1 |

#### 工资统计
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 本月收入 | 本月工资总额 | P0 |
| 月度趋势图 | 收入变化折线图 | P1 |
| 年度汇总 | 全年总收入 | P1 |
| 发薪准时率 | 实际日期vs配置日期 | P2 |

#### 个人中心
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 微信登录 | openid授权登录 | P0 |
| 匿名昵称 | 系统生成匿名昵称 | P0 |
| 工资记录列表 | 历史记录查看 | P0 |
| 打工天数 | 入职天数统计 | P1 |
| 设置 | 应用设置 | P1 |

#### 分享功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 发薪海报 | 自动生成分享海报 | P1 |
| 保存到相册 | 海报保存 | P1 |
| 分享到微信 | 微信分享 | P0 |

### Web管理后台

#### 用户管理
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 用户列表 | 展示所有注册用户 | P0 |
| 用户详情 | 基本信息、统计 | P0 |
| 用户状态 | 正常/禁用 | P1 |
| 搜索筛选 | 按昵称/状态筛选 | P1 |

#### 内容审核（基础）
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 工资记录列表 | 查看所有记录 | P0 |
| 图片审核 | 人工审核图片 | P1 |
| 删除记录 | 删除违规内容 | P1 |

#### 数据统计
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 用户统计 | 总数/新增/活跃 | P0 |
| 工资记录统计 | 记录总数/趋势 | P0 |
| 基础图表 | 数据可视化 | P1 |

#### 系统设置
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 管理员登录 | 账号密码登录 | P0 |
| 角色权限 | 管理员角色 | P1 |
| 操作日志 | 关键操作记录 | P2 |

## 1.2 数据模型（MVP）

```typescript
// 用户表
interface User {
  id: string;
  openid: string;
  anonymousName: string;
  avatar?: string;
  createdAt: Date;
}

// 发薪日配置表
interface PaydayConfig {
  id: string;
  userId: string;
  jobName: string;
  payday: number;              // 1-31
  calendarType: 'solar' | 'lunar';
  estimatedSalary?: number;
  isActive: boolean;
}

// 工资记录表
interface SalaryRecord {
  id: string;
  userId: string;
  configId: string;
  amount: number;
  amountEncrypted: string;     // 加密存储
  paydayDate: Date;
  salaryType: 'normal' | 'bonus' | 'allowance';
  images?: string[];
  note?: string;
  mood: MoodType;
}
```

## 1.3 技术实现（MVP）

### 前端
- uni-app (Vue3 + TypeScript)
- UniUI 组件库
- ECharts (统计图表)

### 后端
- FastAPI (Python)
- MySQL 8.0
- Redis (基础缓存)
- 腾讯云 COS (图片存储)

### 第三方服务
- 微信小程序登录
- 腾讯云图片审核（基础版）

## 1.4 MVP验收标准

### 功能验收
- [ ] 用户可以完成微信登录
- [ ] 用户可以配置发薪日（支持多工作）
- [ ] 用户可以记录工资（支持图片上传）
- [ ] 首页显示发薪倒计时和状态
- [ ] 可以查看工资统计（月度/年度）
- [ ] 可以生成分享海报
- [ ] 管理后台可以查看用户和工资记录

### 性能验收
- [ ] 接口响应时间 < 500ms (P95)
- [ ] 页面加载时间 < 2s
- [ ] 支持500并发用户

### 安全验收
- [ ] 工资金额加密存储
- [ ] 图片上传安全检测
- [ ] 接口基础限流

### 上线准备
- [ ] 小程序提交审核
- [ ] 服务器部署完成
- [ ] 域名备案完成
- [ ] 监控告警配置

---

# Phase 2: 社区版 - 社交型产品

**目标**: 增加社区功能，提升用户留存和互动
**时间**: 6-8周（MVP上线后）
**可上线标准**: 用户可以发帖、评论、互动

## 2.1 新增功能

### 小程序端

#### 社区模块
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 吐槽广场 | 帖子列表（热门/最新） | P0 |
| 发布帖子 | 文字+图片（最多9张） | P0 |
| 帖子详情 | 查看帖子内容 | P0 |
| 评论功能 | 楼层式评论 | P0 |
| 点赞功能 | 点赞/取消点赞 | P0 |
| 标签筛选 | 按标签筛选帖子 | P1 |
| 话题聚合 | 话题页面 | P1 |
| 我的帖子 | 发布历史 | P0 |

#### 帖子发布
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 帖子类型 | 吐槽/分享/提问 | P0 |
| 文字输入 | 10-1000字 | P0 |
| 图片上传 | 最多9张 | P0 |
| 工资区间 | 可选填 | P1 |
| 行业选择 | 可选填 | P1 |
| 城市选择 | 可选填 | P1 |
| 自定义标签 | 最多3个 | P2 |

#### 互动功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 评论列表 | 楼层式展示 | P0 |
| 二级回复 | 回复评论 | P0 |
| 热门评论 | 点赞数排序 | P1 |
| 点赞动画 | 点赞反馈 | P1 |
| 分享帖子 | 分享到微信 | P1 |

#### 消息通知
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 评论通知 | 有人评论你的帖子 | P0 |
| 回复通知 | 有人回复你的评论 | P0 |
| 点赞通知 | 有人点赞你的内容 | P1 |
| 系统通知 | 运营推送 | P1 |
| 通知列表 | 通知消息中心 | P0 |
| 未读标记 | 红点提示 | P0 |

#### 用户主页
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 匿名主页 | 匿名昵称+头像 | P0 |
| 发帖数 | 统计展示 | P0 |
| 粉丝/关注 | Phase 3功能 | P2 |
| 个人简介 | 可选填 | P2 |

### Web管理后台（社区）

#### 内容管理
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 帖子列表 | 所有帖子 | P0 |
| 帖子详情 | 查看完整内容 | P0 |
| 隐藏/删除 | 内容管理 | P0 |
| 置顶推荐 | 设置推荐 | P1 |
| 评论管理 | 查看删除评论 | P1 |
| 举报处理 | 用户举报 | P1 |

#### 风控管理
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 待审核列表 | 风控pending列表 | P0 |
| 审核详情 | 查看风控结果 | P0 |
| 人工审核 | 通过/拒绝 | P0 |
| 风控统计 | 审核数据统计 | P1 |
| 敏感词管理 | 敏感词库 | P1 |

#### 社区统计
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 帖子统计 | 总数/日新增 | P0 |
| 评论统计 | 总数/互动率 | P0 |
| 用户行为统计 | 发帖率/活跃度 | P1 |
| 内容趋势 | 热门标签/话题 | P1 |

## 2.2 数据模型（社区版新增）

```typescript
// 帖子表
interface Post {
  id: string;
  userId: string;
  anonymousName: string;
  content: string;
  images?: string[];
  tags?: string[];
  type: 'complaint' | 'sharing' | 'question';
  salaryRange?: string;
  industry?: string;
  city?: string;

  // 统计
  viewCount: number;
  likeCount: number;
  commentCount: number;

  // 状态
  status: 'normal' | 'hidden' | 'deleted';

  // 风控
  riskStatus: 'pending' | 'approved' | 'rejected';
  riskScore?: number;
  riskReason?: string;
}

// 评论表
interface Comment {
  id: string;
  postId: string;
  userId: string;
  anonymousName: string;
  content: string;
  parentId?: string;
  likeCount: number;
  riskStatus: 'pending' | 'approved' | 'rejected';
}

// 点赞表
interface Like {
  id: string;
  userId: string;
  targetType: 'post' | 'comment';
  targetId: string;
}

// 通知表
interface Notification {
  id: string;
  userId: string;
  type: 'comment' | 'reply' | 'like' | 'system';
  title: string;
  content: string;
  relatedId?: string;
  isRead: boolean;
}

// 风控审核表
interface RiskCheck {
  id: string;
  targetId: string;
  targetType: 'post' | 'comment';
  status: 'pending' | 'approved' | 'rejected';
  score: number;
  reasons: string[];
  checkerType: 'auto' | 'manual';
}
```

## 2.3 风控系统（Phase 2核心）

### 风控流程
```
用户发布内容
    ↓
内容立即发布（risk_status=pending）
    ↓
异步风控检测
    ├── 文字敏感词检测
    ├── 图片内容审核
    └── OCR文字提取审核
    ↓
风控判定
    ├── score < 50 → approved
    ├── 50 ≤ score < 80 → manual (人工复核)
    └── score ≥ 80 → rejected (下架+通知)
```

### 风控规则
| 检测项 | 权重 | 阈值 |
|--------|------|------|
| 敏感词 | 90分 | 命中即高风险 |
| 联系方式 | 80分 | 包含即高风险 |
| 色情图片 | 95分 | 命中即高风险 |
| 暴力图片 | 95分 | 命中即高风险 |
| 广告图片 | 60分 | 命中即中风险 |

## 2.4 技术实现（社区版新增）

### 后端服务
- **风控服务**: 独立部署
- **消息队列**: Celery + Redis
- **任务队列**: 异步风控审核

### 第三方服务
- **腾讯云天御**: 文本/图片审核
- **腾讯云OCR**: 图片文字提取

### 缓存策略
- **帖子热度**: Redis ZSet
- **点赞状态**: Redis String
- **通知队列**: Redis List

## 2.5 社区版验收标准

### 功能验收
- [ ] 用户可以发布帖子（文字+图片）
- [ ] 用户可以评论和点赞
- [ ] 用户可以收到通知
- [ ] 帖子列表正常展示（热门/最新）
- [ ] 风控系统正常工作
- [ ] 管理后台可以审核内容

### 性能验收
- [ ] 发帖接口 < 1s
- [ ] 帖子列表加载 < 500ms
- [ ] 支持1000并发用户

### 安全验收
- [ ] 敏感词过滤生效
- [ ] 图片违规检测生效
- [ ] 风控拒绝内容及时下架
- [ ] 接口防刷限流

---

# Phase 3: 完整版 - 平台型产品

**目标**: 完善社交功能，增加数据洞察，商业化探索
**时间**: 8-10周（社区版上线后）
**可上线标准**: 形成完整的产品生态

## 3.1 新增功能

### 小程序端

#### 关注系统
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 关注用户 | 关注感兴趣的用户 | P0 |
| 取消关注 | 取消关注 | P0 |
| 粉丝列表 | 查看粉丝 | P0 |
| 关注列表 | 查看关注 | P0 |
| 关注动态 | 关注用户的帖子流 | P0 |

#### 用户主页增强
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 粉丝数/关注数 | 统计展示 | P0 |
| 个人简介 | 自我介绍 | P1 |
| 获赞数 | 总获赞统计 | P1 |
| 帖子列表 | 发布历史 | P0 |

#### 数据洞察
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 行业工资分布 | 按行业统计 | P0 |
| 城市工资对比 | 按城市统计 | P0 |
| 工资区间分布 | 薪资区间占比 | P0 |
| 发薪日分布 | 哪天发薪最多 | P1 |
| 个人工资报告 | 月度分析报告 | P1 |

#### 工资记录增强
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 税前金额 | 可选填 | P1 |
| 扣税金额 | 自动计算 | P1 |
| 收入来源标签 | 多职业 | P2 |
| 延迟发薪标记 | 记录延迟 | P2 |
| 工资增长趋势 | 涨薪记录 | P1 |

#### 打卡功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 发薪日打卡 | 打卡按钮 | P0 |
| 打卡记录 | 历史打卡 | P1 |
| 打卡日历 | 日历视图 | P1 |
| 连续打卡 | 连续天数 | P2 |

#### 个性化设置
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 主题皮肤 | 多套主题 | P1 |
| 虚拟头像 | 默认头像库 | P2 |
| 隐私设置 | 允许关注/评论 | P0 |
| 消息设置 | 通知开关 | P0 |

### Web管理后台（完整版）

#### 用户管理增强
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 用户分层 | 新用户/活跃/沉默 | P0 |
| 用户行为分析 | 活跃度/留存 | P0 |
| 留存分析 | D1/D7/D30 | P1 |
| 用户画像 | 标签管理 | P1 |

#### 运营功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 话题管理 | 创建/编辑话题 | P0 |
| 内容推荐 | 推荐位配置 | P0 |
| 活动管理 | 运营活动 | P1 |
| PUSH推送 | 消息推送 | P1 |

#### 数据分析增强
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 留存分析 | 留存率报表 | P0 |
| 转化分析 | 关键路径转化 | P1 |
| 漏斗分析 | 用户行为漏斗 | P1 |
| 自定义报表 | 灵活查询 | P2 |

#### 商业化配置
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 会员配置 | 会员权益 | P1 |
| 主题商店 | 皮肤管理 | P1 |
| 订单管理 | 交易记录 | P1 |

## 3.2 数据模型（完整版新增）

```typescript
// 关注表
interface Follow {
  id: string;
  followerId: string;      // 关注者
  followingId: string;     // 被关注者
}

// 话题表
interface Topic {
  id: string;
  name: string;
  description?: string;
  coverImage?: string;
  postCount: number;
  isHot: boolean;
  sortOrder: number;
}

// 会员订单表
interface MembershipOrder {
  id: string;
  userId: string;
  type: 'monthly' | 'yearly';
  amount: number;
  status: 'pending' | 'paid' | 'cancelled';
}

// 主题表
interface Theme {
  id: string;
  name: string;
  preview: string;         // 预览图
  price: number;           // 价格（0=免费）
  isVip: boolean;          // 是否会员专属
}

// 打卡记录表
interface CheckIn {
  id: string;
  userId: string;
  checkInDate: Date;
  consecutiveDays: number; // 连续天数
}
```

## 3.3 商业化方案（Phase 3）

### 会员体系
| 等级 | 价格 | 权益 |
|------|------|------|
| 免费用户 | 0 | 基础功能 |
| 月度会员 | 9.9元/月 | 专属主题、数据报告、去广告 |
| 年度会员 | 88元/年 | 全部会员权益 |

### 虚拟商品
| 商品 | 价格 | 说明 |
|------|------|------|
| 主题皮肤 | 3-10元 | 个性化主题 |
| 虚拟头像 | 1-5元 | 特殊头像 |
| 月度报告 | 5元 | 详细工资分析 |

### 品牌合作（未来）
- 招聘平台合作
- 理财课程推广
- 职场技能培训

## 3.4 技术实现（完整版新增）

### 推荐系统
```python
# 基于协同过滤的帖子推荐
async def recommend_posts(user_id: str, limit: int = 20) -> List[Post]:
    # 1. 获取用户关注的用户
    following_ids = await get_following(user_id)

    # 2. 获取这些用户的互动帖子
    interacted_posts = await get_interacted_posts(following_ids)

    # 3. 计算相似度，推荐未看过的
    recommendations = calculate_similarity(user_id, interacted_posts)

    return recommendations[:limit]
```

### 数据分析
- **ElasticSearch**: 海量数据搜索
- **ClickHouse**: 数据分析（可选）

## 3.5 完整版验收标准

### 功能验收
- [ ] 关注功能完整可用
- [ ] 数据洞察页面展示
- [ ] 会员购买流程正常
- [ ] 主题切换生效
- [ ] 打卡功能正常

### 性能验收
- [ ] 推荐接口 < 800ms
- [ ] 数据统计接口 < 1s
- [ ] 支持2000并发用户

### 商业验收
- [ ] 会员付费流程完整
- [ ] 订单记录准确
- [ ] 主题商城可用

---

# 三阶段对比

| 维度 | Phase 1 MVP | Phase 2 社区 | Phase 3 完整 |
|------|-------------|--------------|--------------|
| **定位** | 工具型 | 社交型 | 平台型 |
| **核心价值** | 工资记录 | 社区互动 | 数据+商业 |
| **用户路径** | 记录→统计 | 记录→社区→留存 | 记录→社区→付费 |
| **关键功能** | 发薪日、工资记录 | 帖子、评论、风控 | 关注、数据、会员 |
| **数据表** | 3张 | 9张 | 15张 |
| **API数量** | ~20个 | ~50个 | ~80个 |
| **开发周期** | 6-8周 | 6-8周 | 8-10周 |
| **团队规模** | 3-5人 | 5-8人 | 8-12人 |

---

# 发布计划

## MVP版发布计划（Phase 1）

| 阶段 | 时间 | 里程碑 | 交付物 |
|------|------|--------|--------|
| 需求确认 | Week 1 | 需求评审 | PRD v1.0 |
| 技术设计 | Week 2 | 架构设计 | 技术方案、API文档 |
| 开发 | Week 3-6 | 核心功能开发 | Alpha版本 |
| 测试 | Week 7 | 功能测试 | Beta版本 |
| 修复 | Week 8 | Bug修复 | RC版本 |
| 上线 | Week 9 | 正式发布 | v1.0 |

## 社区版发布计划（Phase 2）

| 阶段 | 时间 | 里程碑 | 交付物 |
|------|------|--------|--------|
| 需求确认 | Week 1 | 需求评审 | PRD v2.0 |
| 开发 | Week 2-7 | 社区功能开发 | Beta版本 |
| 灰度发布 | Week 8 | 10%用户 | 灰度版本 |
| 全量发布 | Week 9 | 100%用户 | v2.0 |

## 完整版发布计划（Phase 3）

| 阶段 | 时间 | 里程碑 | 交付物 |
|------|------|--------|--------|
| 需求确认 | Week 1 | 需求评审 | PRD v3.0 |
| 开发 | Week 2-9 | 完整功能开发 | Beta版本 |
| 付费测试 | Week 10 | 付费流程测试 | Beta版本 |
| 正式发布 | Week 11 | 正式发布 | v3.0 |

---

# 风险管理

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| 内容安全风险 | 高 | 多层风控+人工审核 |
| 用户增长不达预期 | 中 | 社区功能增强+裂变活动 |
| 性能瓶颈 | 中 | 缓存优化+扩容方案 |
| 开发延期 | 中 | 功能优先级调整 |

---
第一笔工资，工资花销出处，秀年终奖，发工资能给人带来什么，好处等，每个月目标存多少钱

**文档版本**: v1.0
**最后更新**: 2025-02-11
