============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-7.4.4, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
rootdir: /Users/a1234/Documents/workspace/payDay/backend
configfile: pytest.ini
testpaths: tests
plugins: xdist-3.8.0, timeout-2.4.0, asyncio-0.21.1, anyio-3.7.1, Faker-37.12.0, cov-7.0.0
asyncio: mode=auto
collecting ... collected 149 items

tests/test_api.py::test_root PASSED                                      [  0%]
tests/test_api.py::test_health PASSED                                    [  1%]
tests/test_api.py::test_metrics PASSED                                   [  2%]
tests/test_api.py::test_login_endpoint FAILED                            [  2%]
tests/test_api.py::test_cors_headers PASSED                              [  3%]
tests/test_request_utils.py::TestGetClientIp::test_extract_from_x_forwarded_for PASSED [  4%]
tests/test_request_utils.py::TestGetClientIp::test_takes_first_ip_from_forwarded_chain PASSED [  4%]
tests/test_request_utils.py::TestGetClientIp::test_extract_from_x_real_ip PASSED [  5%]
tests/test_request_utils.py::TestGetClientIp::test_x_real_ip_priority_over_forwarded FAILED [  6%]
tests/test_request_utils.py::TestGetClientIp::test_extract_from_client_host PASSED [  6%]
tests/test_request_utils.py::TestGetClientIp::test_strips_whitespace_from_ip PASSED [  7%]
tests/test_request_utils.py::TestGetClientIp::test_returns_loopback_when_no_headers PASSED [  8%]
tests/test_sanitize.py::TestSanitizeHtml::test_removes_script_tag FAILED [  8%]
tests/test_sanitize.py::TestSanitizeHtml::test_removes_iframe_tag FAILED [  9%]
tests/test_sanitize.py::TestSanitizeHtml::test_removes_object_tag FAILED [ 10%]
tests/test_sanitize.py::TestSanitizeHtml::test_removes_embed_tag FAILED  [ 10%]
tests/test_sanitize.py::TestSanitizeHtml::test_removes_event_handlers PASSED [ 11%]
tests/test_sanitize.py::TestSanitizeHtml::test_escapes_html_entities PASSED [ 12%]
tests/test_sanitize.py::TestSanitizeHtml::test_escapes_quotes PASSED     [ 12%]
tests/test_sanitize.py::TestSanitizeHtml::test_escapes_ampersand PASSED  [ 13%]
tests/test_sanitize.py::TestSanitizeHtml::test_removes_control_characters PASSED [ 14%]
tests/test_sanitize.py::TestSanitizeHtml::test_preserves_newlines_and_tabs PASSED [ 14%]
tests/test_sanitize.py::TestSanitizeHtml::test_handles_empty_input PASSED [ 15%]
tests/test_sanitize.py::TestSanitizeHtml::test_handles_complex_xss PASSED [ 16%]
tests/test_sanitize.py::TestSanitizeStrict::test_removes_all_html_tags PASSED [ 16%]
tests/test_sanitize.py::TestSanitizeStrict::test_truncates_long_content PASSED [ 17%]
tests/test_sanitize.py::TestSanitizeStrict::test_defaults_max_length PASSED [ 18%]
tests/test_sanitize.py::TestSanitizeStrict::test_handles_plain_text PASSED [ 18%]
tests/test_services.py::TestTextContactScore::test_no_contact PASSED     [ 19%]
tests/test_services.py::TestTextContactScore::test_phone_number PASSED   [ 20%]
tests/test_services.py::TestTextContactScore::test_email PASSED          [ 20%]
tests/test_services.py::TestTextContactScore::test_qq FAILED             [ 21%]
tests/test_services.py::TestTextContactScore::test_wechat PASSED         [ 22%]
tests/test_services.py::TestTextSensitiveScore::test_no_sensitive_words FAILED [ 22%]
tests/test_services.py::TestTextSensitiveScore::test_sensitive_word_found FAILED [ 23%]
tests/test_services.py::TestTextSensitiveScore::test_case_insensitive FAILED [ 24%]
tests/test_services.py::TestEvaluateContent::test_safe_content FAILED    [ 24%]
tests/test_services.py::TestEvaluateContent::test_contact_info_content FAILED [ 25%]
tests/test_services.py::TestEvaluateContent::test_manual_review_content FAILED [ 26%]
tests/api/test_auth.py::TestLoginEndpoint::test_login_success FAILED     [ 26%]
tests/api/test_auth.py::TestLoginEndpoint::test_login_missing_code FAILED [ 27%]
tests/api/test_auth.py::TestLoginEndpoint::test_login_invalid_code FAILED [ 28%]
tests/api/test_auth.py::TestRefreshTokenEndpoint::test_refresh_token_success PASSED [ 28%]
tests/api/test_auth.py::TestRefreshTokenEndpoint::test_refresh_token_invalid PASSED [ 29%]
tests/api/test_auth.py::TestLogoutEndpoint::test_logout_success FAILED   [ 30%]
tests/api/test_auth.py::TestGetUserProfile::test_get_user_profile_success FAILED [ 30%]
tests/api/test_auth.py::TestGetUserProfile::test_get_user_profile_unauthorized FAILED [ 31%]
tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_success FAILED [ 32%]
tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_missing_order_id FAILED [ 32%]
tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_order_not_found FAILED [ 33%]
tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_invalid_order_status FAILED [ 34%]
tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_user_no_openid FAILED [ 34%]
tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_unauthorized FAILED [ 35%]
tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_success FAILED [ 36%]
tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_not_found FAILED [ 36%]
tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_unauthorized FAILED [ 37%]
tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_forbidden FAILED [ 38%]
tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_success FAILED [ 38%]
tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_invalid_content_type FAILED [ 39%]
tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_invalid_xml FAILED [ 40%]
tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_order_not_found FAILED [ 40%]
tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_invalid_signature FAILED [ 41%]
tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_success FAILED [ 42%]
tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_missing_required_fields FAILED [ 42%]
tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_invalid_amount FAILED [ 43%]
tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_invalid_mood FAILED [ 44%]
tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_unauthorized FAILED [ 44%]
tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_success FAILED [ 45%]
tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_with_filters FAILED [ 46%]
tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_pagination FAILED [ 46%]
tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_unauthorized FAILED [ 47%]
tests/api/test_salary.py::TestGetSalaryDetailEndpoint::test_get_salary_detail_success FAILED [ 48%]
tests/api/test_salary.py::TestGetSalaryDetailEndpoint::test_get_salary_detail_not_found FAILED [ 48%]
tests/api/test_salary.py::TestGetSalaryDetailEndpoint::test_get_salary_detail_unauthorized FAILED [ 49%]
tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_success FAILED [ 50%]
tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_partial FAILED [ 51%]
tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_not_found FAILED [ 51%]
tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_invalid_mood FAILED [ 52%]
tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_unauthorized FAILED [ 53%]
tests/api/test_salary.py::TestDeleteSalaryEndpoint::test_delete_salary_success FAILED [ 53%]
tests/api/test_salary.py::TestDeleteSalaryEndpoint::test_delete_salary_not_found FAILED [ 54%]
tests/api/test_salary.py::TestDeleteSalaryEndpoint::test_delete_salary_unauthorized FAILED [ 55%]
tests/services/test_auth_service.py::TestGetOrCreateUser::test_new_user_creation PASSED [ 55%]
tests/services/test_auth_service.py::TestGetOrCreateUser::test_existing_user_returned PASSED [ 56%]
tests/services/test_auth_service.py::TestGetOrCreateUser::test_concurrent_user_creation PASSED [ 57%]
tests/services/test_auth_service.py::TestLoginWithCode::test_new_user_login_success PASSED [ 57%]
tests/services/test_auth_service.py::TestLoginWithCode::test_existing_user_login_success PASSED [ 58%]
tests/services/test_auth_service.py::TestLoginWithCode::test_invalid_code_returns_none PASSED [ 59%]
tests/services/test_auth_service.py::TestLoginWithCode::test_login_with_unionid PASSED [ 59%]
tests/services/test_auth_service.py::TestRefreshAccessToken::test_refresh_token_success PASSED [ 60%]
tests/services/test_auth_service.py::TestRefreshAccessToken::test_refresh_token_invalid_user_id PASSED [ 61%]
tests/services/test_auth_service.py::TestRefreshAccessToken::test_refresh_token_revoked_detection PASSED [ 61%]
tests/services/test_auth_service.py::TestRefreshAccessToken::test_refresh_token_not_match_stored PASSED [ 62%]
tests/services/test_auth_service.py::TestRevokeRefreshToken::test_revoke_token_success PASSED [ 63%]
tests/services/test_auth_service.py::TestRevokeRefreshToken::test_revoke_token_redis_error PASSED [ 63%]
tests/services/test_payment_service.py::TestCreateMembershipPayment::test_create_payment_success PASSED [ 64%]
tests/services/test_payment_service.py::TestCreateMembershipPayment::test_create_payment_order_not_found PASSED [ 65%]
tests/services/test_payment_service.py::TestCreateMembershipPayment::test_create_payment_invalid_status PASSED [ 65%]
tests/services/test_payment_service.py::TestCreateMembershipPayment::test_create_payment_with_membership_name PASSED [ 66%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_success PASSED [ 67%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_idempotent PASSED [ 67%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_order_not_found PASSED [ 68%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_missing_fields PASSED [ 69%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_amount_mismatch PASSED [ 69%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_different_transaction_id PASSED [ 70%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_invalid_time_format PASSED [ 71%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_decimal_precision PASSED [ 71%]
tests/services/test_payment_service.py::TestHandlePaymentNotify::test_handle_notify_round_half_up PASSED [ 72%]
tests/services/test_payment_service.py::TestGeneratePaymentResponse::test_generate_success_response PASSED [ 73%]
tests/services/test_payment_service.py::TestGeneratePaymentResponse::test_generate_fail_response PASSED [ 73%]
tests/services/test_payment_service.py::TestGeneratePaymentResponse::test_generate_response_default_msg PASSED [ 74%]
tests/services/test_payment_service.py::TestPaymentServiceEdgeCases::test_create_payment_with_zero_amount PASSED [ 75%]
tests/services/test_payment_service.py::TestPaymentServiceEdgeCases::test_handle_notify_with_invalid_amount PASSED [ 75%]
tests/services/test_payment_service.py::TestPaymentServiceEdgeCases::test_handle_notify_paid_order_with_same_transaction PASSED [ 76%]
tests/services/test_payment_service.py::TestPaymentServiceEdgeCases::test_handle_notify_concurrent_protection PASSED [ 77%]
tests/services/test_salary_service.py::TestRecordToResponse::test_record_to_response_decrypts_amount PASSED [ 77%]
tests/services/test_salary_service.py::TestCreateSalary::test_create_salary_success PASSED [ 78%]
tests/services/test_salary_service.py::TestCreateSalary::test_create_salary_with_bonus_type PASSED [ 79%]
tests/services/test_salary_service.py::TestCreateSalary::test_create_salary_with_all_mood_types PASSED [ 79%]
tests/services/test_salary_service.py::TestCreateSalary::test_create_salary_with_all_salary_types PASSED [ 80%]
tests/services/test_salary_service.py::TestListByUser::test_list_user_salaries_empty PASSED [ 81%]
tests/services/test_salary_service.py::TestListByUser::test_list_user_salaries_success PASSED [ 81%]
tests/services/test_salary_service.py::TestListByUser::test_list_user_salaries_with_pagination PASSED [ 82%]
tests/services/test_salary_service.py::TestListByUser::test_list_user_salaries_filter_by_config PASSED [ 83%]
tests/services/test_salary_service.py::TestListByUser::test_list_user_salaries_filter_by_date_range PASSED [ 83%]
tests/services/test_salary_service.py::TestListByUser::test_list_user_salaries_isolation PASSED [ 84%]
tests/services/test_salary_service.py::TestGetById::test_get_salary_by_id_success PASSED [ 85%]
tests/services/test_salary_service.py::TestGetById::test_get_salary_by_id_not_found PASSED [ 85%]
tests/services/test_salary_service.py::TestGetById::test_get_salary_by_id_wrong_user PASSED [ 86%]
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_success PASSED [ 87%]
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_amount_reencrypts PASSED [ 87%]
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_partial_fields PASSED [ 88%]
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_not_found PASSED [ 89%]
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_wrong_user PASSED [ 89%]
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_all_fields PASSED [ 90%]
tests/services/test_salary_service.py::TestDeleteSalary::test_delete_salary_success PASSED [ 91%]
tests/services/test_salary_service.py::TestDeleteSalary::test_delete_salary_not_found PASSED [ 91%]
tests/services/test_salary_service.py::TestDeleteSalary::test_delete_salary_wrong_user PASSED [ 92%]
tests/services/test_salary_service.py::TestAdminFunctions::test_get_by_id_for_admin PASSED [ 93%]
tests/services/test_salary_service.py::TestAdminFunctions::test_get_by_id_for_admin_not_found PASSED [ 93%]
tests/services/test_salary_service.py::TestAdminFunctions::test_delete_for_admin PASSED [ 94%]
tests/services/test_salary_service.py::TestAdminFunctions::test_delete_for_admin_not_found PASSED [ 95%]
tests/services/test_salary_service.py::TestAdminFunctions::test_update_risk_for_admin_approve PASSED [ 95%]
tests/services/test_salary_service.py::TestAdminFunctions::test_update_risk_for_admin_reject PASSED [ 96%]
tests/services/test_salary_service.py::TestAdminFunctions::test_update_risk_for_admin_not_found PASSED [ 97%]
tests/services/test_salary_service.py::TestAdminFunctions::test_update_risk_for_admin_invalid_status PASSED [ 97%]
tests/services/test_salary_service.py::TestAdminFunctions::test_list_all_for_admin PASSED [ 98%]
tests/services/test_salary_service.py::TestAdminFunctions::test_list_all_for_admin_pagination PASSED [ 99%]
tests/services/test_salary_service.py::TestAdminFunctions::test_list_all_for_admin_ordering PASSED [100%]/Users/a1234/Library/Python/3.9/lib/python/site-packages/coverage/report_core.py:107: CoverageWarning: Couldn't parse Python file '/Users/a1234/Documents/workspace/payDay/backend/app/api/v1/post_pagination_example.py' (couldnt-parse); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-couldnt-parse
  coverage._warn(msg, slug="couldnt-parse")


=================================== FAILURES ===================================
_____________________________ test_login_endpoint ______________________________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/test_api.py:40: in test_login_endpoint
    response = client.post("/api/v1/auth/login", json={"code": "test_code"})
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:592: in solve_dependencies
    solved = await call(**sub_values)
app/core/deps.py:273: in rate_limit_login
    identifier = await get_client_identifier(request)
E   TypeError: object MagicMock can't be used in 'await' expression
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:31] ERROR in app.core.error_handler: Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
____________ TestGetClientIp.test_x_real_ip_priority_over_forwarded ____________
tests/test_request_utils.py:59: in test_x_real_ip_priority_over_forwarded
    assert result == "198.51.100.1"
E   AssertionError: assert '203.0.113.1' == '198.51.100.1'
E     - 198.51.100.1
E     + 203.0.113.1
___________________ TestSanitizeHtml.test_removes_script_tag ___________________
tests/test_sanitize.py:16: in test_removes_script_tag
    assert "&lt;script&gt;alert('xss')&lt;/script&gt;Hello" == result
E   assert "&lt;script&gt;alert('xss')&lt;/script&gt;Hello" == 'Hello'
E     - Hello
E     + &lt;script&gt;alert('xss')&lt;/script&gt;Hello
___________________ TestSanitizeHtml.test_removes_iframe_tag ___________________
tests/test_sanitize.py:22: in test_removes_iframe_tag
    assert "&lt;iframe src=\"evil.com\"&gt;&lt;/iframe&gt;Content" == result
E   assert '&lt;iframe src="evil.com"&gt;&lt;/iframe&gt;Content' == 'Content'
E     - Content
E     + &lt;iframe src="evil.com"&gt;&lt;/iframe&gt;Content
___________________ TestSanitizeHtml.test_removes_object_tag ___________________
tests/test_sanitize.py:28: in test_removes_object_tag
    assert "&lt;object data=\"evil.swf\"&gt;&lt;/object&gt;Content" == result
E   assert '&lt;object data="evil.swf"&gt;&lt;/object&gt;Content' == 'Content'
E     - Content
E     + &lt;object data="evil.swf"&gt;&lt;/object&gt;Content
___________________ TestSanitizeHtml.test_removes_embed_tag ____________________
tests/test_sanitize.py:34: in test_removes_embed_tag
    assert "&lt;embed src=\"evil.swf\"&gt;" == result
E   assert '&lt;embed src="evil.swf"&gt;' == ''
E     + &lt;embed src="evil.swf"&gt;
_________________________ TestTextContactScore.test_qq _________________________
tests/test_services.py:38: in test_qq
    assert score == 80
E   assert 0 == 80
________________ TestTextSensitiveScore.test_no_sensitive_words ________________
tests/test_services.py:53: in test_no_sensitive_words
    score, reason = _text_sensitive_score("这是正常内容")
app/services/risk_service.py:76: in _text_sensitive_score
    text = text.lower().strip()
E   UnboundLocalError: local variable 'text' referenced before assignment
_______________ TestTextSensitiveScore.test_sensitive_word_found _______________
tests/test_services.py:59: in test_sensitive_word_found
    score, reason = _text_sensitive_score("这是违禁词1的内容")
app/services/risk_service.py:76: in _text_sensitive_score
    text = text.lower().strip()
E   UnboundLocalError: local variable 'text' referenced before assignment
_________________ TestTextSensitiveScore.test_case_insensitive _________________
tests/test_services.py:65: in test_case_insensitive
    score, reason = _text_sensitive_score("这是违禁词1的内容")
app/services/risk_service.py:76: in _text_sensitive_score
    text = text.lower().strip()
E   UnboundLocalError: local variable 'text' referenced before assignment
____________________ TestEvaluateContent.test_safe_content _____________________
tests/test_services.py:76: in test_safe_content
    result = await evaluate_content(
E   TypeError: evaluate_content() missing 1 required positional argument: 'db'
________________ TestEvaluateContent.test_contact_info_content _________________
tests/test_services.py:87: in test_contact_info_content
    result = await evaluate_content(
E   TypeError: evaluate_content() missing 1 required positional argument: 'db'
________________ TestEvaluateContent.test_manual_review_content ________________
tests/test_services.py:101: in test_manual_review_content
    result = await evaluate_content(
E   TypeError: evaluate_content() missing 1 required positional argument: 'db'
_____________________ TestLoginEndpoint.test_login_success _____________________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_auth.py:65: in test_login_success
    response = client.post("/api/v1/auth/login", json={"code": "test_code"})
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:592: in solve_dependencies
    solved = await call(**sub_values)
app/core/deps.py:273: in rate_limit_login
    identifier = await get_client_identifier(request)
E   TypeError: object MagicMock can't be used in 'await' expression
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:31] ERROR in app.core.error_handler: Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
__________________ TestLoginEndpoint.test_login_missing_code ___________________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_auth.py:79: in test_login_missing_code
    response = client.post("/api/v1/auth/login", json={})
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:592: in solve_dependencies
    solved = await call(**sub_values)
app/core/deps.py:273: in rate_limit_login
    identifier = await get_client_identifier(request)
E   TypeError: object MagicMock can't be used in 'await' expression
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:31] ERROR in app.core.error_handler: Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
__________________ TestLoginEndpoint.test_login_invalid_code ___________________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_auth.py:98: in test_login_invalid_code
    response = client.post("/api/v1/auth/login", json={"code": "invalid_code"})
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:592: in solve_dependencies
    solved = await call(**sub_values)
app/core/deps.py:273: in rate_limit_login
    identifier = await get_client_identifier(request)
E   TypeError: object MagicMock can't be used in 'await' expression
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:31] ERROR in app.core.error_handler: Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: TypeError - object MagicMock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/deps.py", line 273, in rate_limit_login
    identifier = await get_client_identifier(request)
TypeError: object MagicMock can't be used in 'await' expression
____________________ TestLogoutEndpoint.test_logout_success ____________________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_auth.py:169: in test_logout_success
    response = client.post("/api/v1/auth/logout", headers=user_headers)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:31] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_______________ TestGetUserProfile.test_get_user_profile_success _______________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_auth.py:183: in test_get_user_profile_success
    response = client.get("/api/v1/user/me", headers=user_headers)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:32] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
____________ TestGetUserProfile.test_get_user_profile_unauthorized _____________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_auth.py:195: in test_get_user_profile_unauthorized
    response = client.get("/api/v1/user/me")
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:32] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
____________ TestCreatePaymentEndpoint.test_create_payment_success _____________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:35: in test_create_payment_success
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:32] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
________ TestCreatePaymentEndpoint.test_create_payment_missing_order_id ________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:56: in test_create_payment_missing_order_id
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:32] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
________ TestCreatePaymentEndpoint.test_create_payment_order_not_found _________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:75: in test_create_payment_order_not_found
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:33] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
______ TestCreatePaymentEndpoint.test_create_payment_invalid_order_status ______
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:110: in test_create_payment_invalid_order_status
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:33] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_________ TestCreatePaymentEndpoint.test_create_payment_user_no_openid _________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:141: in test_create_payment_user_no_openid
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:33] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
__________ TestCreatePaymentEndpoint.test_create_payment_unauthorized __________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:161: in test_create_payment_unauthorized
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:33] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
___________ TestGetOrderStatusEndpoint.test_get_order_status_success ___________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:182: in test_get_order_status_success
    response = client.get(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:34] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
__________ TestGetOrderStatusEndpoint.test_get_order_status_not_found __________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:203: in test_get_order_status_not_found
    response = client.get(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:34] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
________ TestGetOrderStatusEndpoint.test_get_order_status_unauthorized _________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:220: in test_get_order_status_unauthorized
    response = client.get(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:34] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
__________ TestGetOrderStatusEndpoint.test_get_order_status_forbidden __________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:249: in test_get_order_status_forbidden
    response = client.get(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:34] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_________ TestWechatPaymentNotifyEndpoint.test_payment_notify_success __________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:279: in test_payment_notify_success
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:34] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
___ TestWechatPaymentNotifyEndpoint.test_payment_notify_invalid_content_type ___
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:297: in test_payment_notify_invalid_content_type
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:35] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_______ TestWechatPaymentNotifyEndpoint.test_payment_notify_invalid_xml ________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:315: in test_payment_notify_invalid_xml
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:35] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____ TestWechatPaymentNotifyEndpoint.test_payment_notify_order_not_found ______
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:340: in test_payment_notify_order_not_found
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:35] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
____ TestWechatPaymentNotifyEndpoint.test_payment_notify_invalid_signature _____
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_payment.py:366: in test_payment_notify_invalid_signature
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:35] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____________ TestCreateSalaryEndpoint.test_create_salary_success ______________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:32: in test_create_salary_success
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:36] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____ TestCreateSalaryEndpoint.test_create_salary_missing_required_fields ______
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:65: in test_create_salary_missing_required_fields
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:36] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
__________ TestCreateSalaryEndpoint.test_create_salary_invalid_amount __________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:89: in test_create_salary_invalid_amount
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:36] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
___________ TestCreateSalaryEndpoint.test_create_salary_invalid_mood ___________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:112: in test_create_salary_invalid_mood
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:36] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
___________ TestCreateSalaryEndpoint.test_create_salary_unauthorized ___________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:134: in test_create_salary_unauthorized
    response = client.post(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:590: in post
    return super().post(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1146: in post
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:37] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_______________ TestListSalaryEndpoint.test_list_salary_success ________________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:162: in test_list_salary_success
    response = client.get("/api/v1/salary", headers=user_headers)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:37] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____________ TestListSalaryEndpoint.test_list_salary_with_filters _____________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:183: in test_list_salary_with_filters
    response = client.get(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:37] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
______________ TestListSalaryEndpoint.test_list_salary_pagination ______________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:201: in test_list_salary_pagination
    response = client.get("/api/v1/salary?limit=1&offset=0", headers=user_headers)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:37] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____________ TestListSalaryEndpoint.test_list_salary_unauthorized _____________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:217: in test_list_salary_unauthorized
    response = client.get("/api/v1/salary")
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:38] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
__________ TestGetSalaryDetailEndpoint.test_get_salary_detail_success __________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:235: in test_get_salary_detail_success
    response = client.get(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:38] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_________ TestGetSalaryDetailEndpoint.test_get_salary_detail_not_found _________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:257: in test_get_salary_detail_not_found
    response = client.get(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:38] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_______ TestGetSalaryDetailEndpoint.test_get_salary_detail_unauthorized ________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:274: in test_get_salary_detail_unauthorized
    response = client.get(f"/api/v1/salary/{test_salary.id}")
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:499: in get
    return super().get(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1055: in get
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:38] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____________ TestUpdateSalaryEndpoint.test_update_salary_success ______________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:292: in test_update_salary_success
    response = client.put(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:627: in put
    return super().put(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1183: in put
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:38] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____________ TestUpdateSalaryEndpoint.test_update_salary_partial ______________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:318: in test_update_salary_partial
    response = client.put(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:627: in put
    return super().put(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1183: in put
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:39] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
____________ TestUpdateSalaryEndpoint.test_update_salary_not_found _____________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:337: in test_update_salary_not_found
    response = client.put(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:627: in put
    return super().put(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1183: in put
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:39] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
___________ TestUpdateSalaryEndpoint.test_update_salary_invalid_mood ___________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:356: in test_update_salary_invalid_mood
    response = client.put(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:627: in put
    return super().put(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1183: in put
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:39] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
___________ TestUpdateSalaryEndpoint.test_update_salary_unauthorized ___________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:372: in test_update_salary_unauthorized
    response = client.put(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:627: in put
    return super().put(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1183: in put
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:39] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
_____________ TestDeleteSalaryEndpoint.test_delete_salary_success ______________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:393: in test_delete_salary_success
    response = client.delete(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:697: in delete
    return super().delete(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1253: in delete
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:40] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
____________ TestDeleteSalaryEndpoint.test_delete_salary_not_found _____________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:415: in test_delete_salary_not_found
    response = client.delete(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:697: in delete
    return super().delete(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1253: in delete
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:40] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
___________ TestDeleteSalaryEndpoint.test_delete_salary_unauthorized ___________
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:98: in receive
    return self.receive_nowait()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:93: in receive_nowait
    raise WouldBlock
E   anyio.WouldBlock

During handling of the above exception, another exception occurred:
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:78: in call_next
    message = await recv_stream.receive()
../../../../Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py:118: in receive
    raise EndOfStream
E   anyio.EndOfStream

During handling of the above exception, another exception occurred:
tests/api/test_salary.py:432: in test_delete_salary_unauthorized
    response = client.delete(f"/api/v1/salary/{test_salary.id}")
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:697: in delete
    return super().delete(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1253: in delete
    return self.request(
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:465: in request
    return super().request(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:828: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:915: in send
    response = self._send_handling_auth(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:943: in _send_handling_auth
    response = self._send_handling_redirects(
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:980: in _send_handling_redirects
    response = self._send_single_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1016: in _send_single_request
    response = transport.handle_request(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../../../../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:175: in limit_request_size
    return await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/utils/metrics.py:257: in dispatch
    response: Response = await call_next(request)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../../../../Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../../../../Library/Python/3.9/lib/python/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/routing.py:264: in app
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:563: in solve_dependencies
    solved_result = await solve_dependencies(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:588: in solve_dependencies
    solved = await solve_generator(
../../../../Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py:513: in solve_generator
    return await stack.enter_async_context(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:556: in enter_async_context
    result = await _cm_type.__aenter__(cm)
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:175: in __aenter__
    return await self.gen.__anext__()
app/core/database.py:79: in get_db
    _get_async_engine()
app/core/database.py:54: in _get_async_engine
    _async_engine = create_async_engine(
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py:117: in create_async_engine
    sync_engine = _create_engine(url, **kw)
<string>:2: in create_engine
    ???
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py:601: in create_engine
    dbapi = dbapi_meth(**dbapi_args)
../../../../Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py:292: in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
E   ModuleNotFoundError: No module named 'aiomysql'
----------------------------- Captured stdout call -----------------------------
[2026-02-12 23:04:40] ERROR in app.core.error_handler: Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
------------------------------ Captured log call -------------------------------
ERROR    app.core.error_handler:error_handler.py:124 Unhandled exception: ModuleNotFoundError - No module named 'aiomysql'
Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/main.py", line 175, in limit_request_size
    return await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/a1234/Documents/workspace/payDay/backend/app/utils/metrics.py", line 257, in dispatch
    response: Response = await call_next(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 563, in solve_dependencies
    solved_result = await solve_dependencies(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 588, in solve_dependencies
    solved = await solve_generator(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/fastapi/dependencies/utils.py", line 513, in solve_generator
    return await stack.enter_async_context(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 556, in enter_async_context
    result = await _cm_type.__aenter__(cm)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 175, in __aenter__
    return await self.gen.__anext__()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 79, in get_db
    _get_async_engine()
  File "/Users/a1234/Documents/workspace/payDay/backend/app/core/database.py", line 54, in _get_async_engine
    _async_engine = create_async_engine(
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/ext/asyncio/engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/engine/create.py", line 601, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
  File "/Users/a1234/Library/Python/3.9/lib/python/site-packages/sqlalchemy/dialects/mysql/aiomysql.py", line 292, in import_dbapi
    __import__("aiomysql"), __import__("pymysql")
ModuleNotFoundError: No module named 'aiomysql'
=============================== warnings summary ===============================
../../../../Library/Python/3.9/lib/python/site-packages/pydantic/_internal/_config.py:268: 13 warnings
  /Users/a1234/Library/Python/3.9/lib/python/site-packages/pydantic/_internal/_config.py:268: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

tests/services/test_auth_service.py::TestRevokeRefreshToken::test_revoke_token_redis_error
  /Users/a1234/Documents/workspace/payDay/backend/tests/services/test_auth_service.py:336: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    await revoke_refresh_token(user_id=str(user.id))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_success
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_amount_reencrypts
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_partial_fields
tests/services/test_salary_service.py::TestUpdateSalary::test_update_salary_all_fields
  /Users/a1234/Documents/workspace/payDay/backend/app/services/salary_service.py:121: RuntimeWarning: coroutine 'AsyncSession.merge' was never awaited
    session.merge(record)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/test_salary_service.py::TestAdminFunctions::test_update_risk_for_admin_approve
tests/services/test_salary_service.py::TestAdminFunctions::test_update_risk_for_admin_reject
  /Users/a1234/Documents/workspace/payDay/backend/app/services/salary_service.py:181: RuntimeWarning: coroutine 'AsyncSession.merge' was never awaited
    session.merge(record)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.9.6-final-0 ________________

Name                                     Stmts   Miss  Cover   Missing
----------------------------------------------------------------------
app/__init__.py                              0      0   100%
app/api/__init__.py                          0      0   100%
app/api/v1/__init__.py                      39      1    97%   44
app/api/v1/admin.py                         85     45    47%   56-60, 77-90, 100-104, 131-132, 144-146, 159-162, 171-172, 188-211, 221-224, 253-262, 274-276, 292-309, 322-327
app/api/v1/admin_config.py                 147     83    44%   61-69, 79-83, 94-109, 119-123, 140-150, 162-166, 177-196, 206-212, 234-272, 283-299
app/api/v1/admin_topic.py                   37     19    49%   26-29, 41-48, 58-63, 74-87, 97-102
app/api/v1/auth.py                          28      8    71%   23-32, 66-67
app/api/v1/cache.py                         26     14    46%   35-44, 58-73
app/api/v1/checkin.py                       21     21     0%   4-55
app/api/v1/comment.py                       37     20    46%   32-33, 45-76, 86-92
app/api/v1/follow.py                        51     25    51%   28, 50-56, 65-66, 76-77, 91-93, 106-107, 120-123, 136-139
app/api/v1/like.py                          39     20    49%   27-32, 42-45, 56-61, 71-74
app/api/v1/membership.py                    33     33     0%   4-84
app/api/v1/notification.py                  39     20    49%   32-36, 49-50, 60-69, 79-85, 96-103
app/api/v1/payday.py                        33     15    55%   27-28, 37-38, 47-50, 60-63, 72-74
app/api/v1/payment.py                       75     60    20%   35-75, 98-130, 153-172, 203-227
app/api/v1/post.py                          29     11    62%   33-45, 58-60, 70-71, 80-83
app/api/v1/recommendation.py                20      6    70%   23-24, 34-37, 46-47
app/api/v1/salary.py                        36     15    58%   37-38, 47-48, 57-60, 70-73, 82-84
app/api/v1/schemas/cache.py                  5      0   100%
app/api/v1/schemas/payment.py               18      0   100%
app/api/v1/share.py                         27     27     0%   5-87
app/api/v1/statistics.py                    17      3    82%   23, 32, 44
app/api/v1/storage.py                       12      3    75%   21, 32-34
app/api/v1/theme.py                         21     21     0%   4-53
app/api/v1/user.py                          21      6    71%   17, 35, 44-45, 55-56
app/celery_app.py                            7      7     0%   5-38
app/core/__init__.py                         2      0   100%
app/core/cache.py                           82     42    49%   31-33, 46, 51, 56, 61, 66, 75-80, 85-89, 94-98, 103-107, 112-115, 124-126, 131-133, 138-140
app/core/config.py                          99     12    88%   23, 29, 39, 49, 56, 157, 162, 171-175, 208
app/core/csrf.py                            46     27    41%   23, 34-37, 55-74, 78-81, 92, 116-125
app/core/database.py                        33      8    76%   68-74, 80-81, 106-108
app/core/db_utils.py                        20     20     0%   4-58
app/core/deps.py                           100     73    27%   33-56, 64-92, 112-127, 151-183, 209-247, 262-264, 274-275, 284-286, 295-297
app/core/error_handler.py                   36     11    69%   28-38, 50-58, 69-77, 89-94, 105-113, 138
app/core/exceptions.py                      37      6    84%   47, 59, 95, 107-108, 124
app/core/query_utils.py                     43     43     0%   4-138
app/core/rate_limit.py                      52     52     0%   5-140
app/core/security.py                        34      3    91%   18, 23, 72
app/core/signature.py                       31     23    26%   41-71, 88-99
app/main.py                                 95     47    51%   38-104, 119, 123, 163-171
app/models/__init__.py                      11      0   100%
app/models/admin.py                         13      0   100%
app/models/base.py                           2      0   100%
app/models/checkin.py                       11     11     0%   4-18
app/models/comment.py                       16      0   100%
app/models/follow.py                        11      0   100%
app/models/like.py                          12      0   100%
app/models/membership.py                    40      0   100%
app/models/notification.py                  14      0   100%
app/models/payday.py                        15      0   100%
app/models/post.py                          24      0   100%
app/models/push.py                          16     16     0%   4-27
app/models/risk_alert.py                    16     16     0%   4-23
app/models/salary.py                        24      0   100%
app/models/sensitive_word.py                11      0   100%
app/models/share.py                         16     16     0%   5-26
app/models/theme.py                         24     24     0%   4-34
app/models/topic.py                         15      0   100%
app/models/user.py                          22      0   100%
app/schemas/__init__.py                      0      0   100%
app/schemas/admin.py                        95      0   100%
app/schemas/auth.py                         15      0   100%
app/schemas/checkin.py                      17     17     0%   4-33
app/schemas/comment.py                      21      0   100%
app/schemas/common.py                        3      3     0%   1-5
app/schemas/follow.py                        8      0   100%
app/schemas/like.py                         10      0   100%
app/schemas/membership.py                   27      0   100%
app/schemas/notification.py                 21      0   100%
app/schemas/payday.py                       31      1    97%   47
app/schemas/post.py                         33      0   100%
app/schemas/salary.py                       50      2    96%   41, 53
app/schemas/share.py                        26     26     0%   4-42
app/schemas/theme.py                        25     25     0%   4-42
app/schemas/topic.py                        28      0   100%
app/schemas/user.py                         23      0   100%
app/services/__init__.py                     0      0   100%
app/services/admin_auth_service.py          17      9    47%   16-17, 27-38
app/services/auth_service.py               108     24    78%   46-63, 94-97, 123, 140, 167-172
app/services/cache_preheat.py               75     60    20%   33-69, 76-100, 107-132, 139-157, 164-183
app/services/checkin_service.py             46     46     0%   4-121
app/services/comment_service.py             98     83    15%   22-30, 40-65, 76-107, 111-112, 116-132, 143-154, 164-179
app/services/follow_service.py              74     60    19%   17-42, 47-78, 88-99, 109-120, 124-130, 135-141, 151-164
app/services/like_service.py               130    115    12%   20-27, 32-65, 70-99, 104-137, 142-171, 179-188
app/services/membership_service.py          65     65     0%   4-181
app/services/notification_service.py        65     53    18%   22-32, 44-53, 58-67, 76-91, 96-106, 115-128, 138-158
app/services/payday_service.py              48     36    25%   16-19, 23-26, 30-45, 51-63, 67-76
app/services/payment_service.py             76     14    82%   123-124, 158-172
app/services/post_service.py               163    143    12%   26-48, 58-75, 85-111, 116-128, 136-160, 171-182, 187-188, 200-215, 220-229, 246-332
app/services/recommendation_service.py      31     22    29%   19-35, 43-86, 93-104
app/services/risk_service.py               102     75    26%   64, 75, 77-80, 90-97, 107-126, 145-184, 194-216
app/services/salary_service.py              99      8    92%   98-99, 126, 140-141, 161-162, 186
app/services/sensitive_word_service.py      62     49    21%   20-30, 35-38, 48-62, 73-96, 101-107, 121-130, 135-136
app/services/share_service.py               46     46     0%   5-118
app/services/statistics_service.py          69     56    19%   17-34, 41-51, 56-57, 62-73, 87-177
app/services/theme_service.py               35     35     0%   4-88
app/services/topic_service.py               75     62    17%   22-31, 36-37, 47-57, 70-97, 102-110, 115-125, 130-140
app/services/user_service.py                51     41    20%   15-16, 20-28, 33-87, 103-116
app/tasks/__init__.py                        0      0   100%
app/tasks/risk_check.py                     42     28    33%   22-23, 32-33, 38-75, 80-116
app/tasks/scheduled.py                      52     52     0%   5-132
app/utils/__init__.py                        0      0   100%
app/utils/cos.py                            70     49    30%   26-37, 42, 55-60, 82-103, 120-135, 148-162, 174-187
app/utils/encryption.py                     29      0   100%
app/utils/image_mosaic.py                  131    131     0%   5-335
app/utils/logger.py                         17      0   100%
app/utils/logger_v2.py                      76     76     0%   5-228
app/utils/metrics.py                       110     46    58%   193-226, 287-298, 307-315, 336, 341, 346, 351, 356, 361, 366, 371-377
app/utils/oss.py                            87     63    28%   32-41, 46-56, 61, 74-77, 99-130, 147-172, 185-198, 210-220
app/utils/pagination.py                     91     91     0%   5-257
app/utils/request.py                        11      0   100%
app/utils/sanitize.py                       23      1    96%   58
app/utils/sentry.py                        149    126    15%   30-81, 90-132, 145-165, 177-196, 208-213, 222-227, 239-240, 258-262, 278-282, 298-319, 332-349, 359-376
app/utils/storage.py                        64     35    45%   33-37, 42, 47, 52, 57, 70-73, 95-106, 123-134, 147-156, 168-175, 184
app/utils/tencent_yu.py                    123    123     0%   5-278
app/utils/wechat.py                         10      7    30%   13-24
app/utils/wechat_pay.py                     84     57    32%   22, 36-45, 62-64, 87-139, 162-211
----------------------------------------------------------------------
TOTAL                                     5063   2994    41%
Coverage HTML written to dir htmlcov
=========================== short test summary info ============================
FAILED tests/test_api.py::test_login_endpoint - TypeError: object MagicMock c...
FAILED tests/test_request_utils.py::TestGetClientIp::test_x_real_ip_priority_over_forwarded
FAILED tests/test_sanitize.py::TestSanitizeHtml::test_removes_script_tag - as...
FAILED tests/test_sanitize.py::TestSanitizeHtml::test_removes_iframe_tag - as...
FAILED tests/test_sanitize.py::TestSanitizeHtml::test_removes_object_tag - as...
FAILED tests/test_sanitize.py::TestSanitizeHtml::test_removes_embed_tag - ass...
FAILED tests/test_services.py::TestTextContactScore::test_qq - assert 0 == 80
FAILED tests/test_services.py::TestTextSensitiveScore::test_no_sensitive_words
FAILED tests/test_services.py::TestTextSensitiveScore::test_sensitive_word_found
FAILED tests/test_services.py::TestTextSensitiveScore::test_case_insensitive
FAILED tests/test_services.py::TestEvaluateContent::test_safe_content - TypeE...
FAILED tests/test_services.py::TestEvaluateContent::test_contact_info_content
FAILED tests/test_services.py::TestEvaluateContent::test_manual_review_content
FAILED tests/api/test_auth.py::TestLoginEndpoint::test_login_success - TypeEr...
FAILED tests/api/test_auth.py::TestLoginEndpoint::test_login_missing_code - T...
FAILED tests/api/test_auth.py::TestLoginEndpoint::test_login_invalid_code - T...
FAILED tests/api/test_auth.py::TestLogoutEndpoint::test_logout_success - Modu...
FAILED tests/api/test_auth.py::TestGetUserProfile::test_get_user_profile_success
FAILED tests/api/test_auth.py::TestGetUserProfile::test_get_user_profile_unauthorized
FAILED tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_success
FAILED tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_missing_order_id
FAILED tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_order_not_found
FAILED tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_invalid_order_status
FAILED tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_user_no_openid
FAILED tests/api/test_payment.py::TestCreatePaymentEndpoint::test_create_payment_unauthorized
FAILED tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_success
FAILED tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_not_found
FAILED tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_unauthorized
FAILED tests/api/test_payment.py::TestGetOrderStatusEndpoint::test_get_order_status_forbidden
FAILED tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_success
FAILED tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_invalid_content_type
FAILED tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_invalid_xml
FAILED tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_order_not_found
FAILED tests/api/test_payment.py::TestWechatPaymentNotifyEndpoint::test_payment_notify_invalid_signature
FAILED tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_success
FAILED tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_missing_required_fields
FAILED tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_invalid_amount
FAILED tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_invalid_mood
FAILED tests/api/test_salary.py::TestCreateSalaryEndpoint::test_create_salary_unauthorized
FAILED tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_success
FAILED tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_with_filters
FAILED tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_pagination
FAILED tests/api/test_salary.py::TestListSalaryEndpoint::test_list_salary_unauthorized
FAILED tests/api/test_salary.py::TestGetSalaryDetailEndpoint::test_get_salary_detail_success
FAILED tests/api/test_salary.py::TestGetSalaryDetailEndpoint::test_get_salary_detail_not_found
FAILED tests/api/test_salary.py::TestGetSalaryDetailEndpoint::test_get_salary_detail_unauthorized
FAILED tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_success
FAILED tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_partial
FAILED tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_not_found
FAILED tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_invalid_mood
FAILED tests/api/test_salary.py::TestUpdateSalaryEndpoint::test_update_salary_unauthorized
FAILED tests/api/test_salary.py::TestDeleteSalaryEndpoint::test_delete_salary_success
FAILED tests/api/test_salary.py::TestDeleteSalaryEndpoint::test_delete_salary_not_found
FAILED tests/api/test_salary.py::TestDeleteSalaryEndpoint::test_delete_salary_unauthorized
================= 54 failed, 95 passed, 20 warnings in 13.24s ==================
